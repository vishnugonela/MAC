<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<vnfd generation="2.0" xmlns="http://www.hp.com/usage/vnfm/vnfd">
    <vnfd-id>Single_CIS_VNFD_MULTI_VDU</vnfd-id>
    <name>eIUM VNFD Example All In One</name>
    <description>Optional description: eIUM VNFD Example All In One</description>
    <provider>OpenStack</provider>
    <version>3.3</version>
    <virtual-links>
        <virtual-link id="vl-vnfmnetwork-management-test">
            <name>Public Network</name>
            <description>the network to external core network for VNFM</description>
            <subnets>
                <subnet>
                    <properties>
                        <property id="gatewayIP">30.104.100.1</property>
                        <property id="subnetAddress">30.104.100.0/23</property>
                        <property id="subnetName">public-subnet</property>
                        <property id="ipVersion">4</property>
                        <property id="disableGateway">FALSE</property>
                        <property id="portSecurityGroups">default</property>
                    </properties>
                </subnet>
            </subnets>
            <properties>
                <property id="adminStateUp">true</property>
            </properties>
        </virtual-link>
		
		
        <virtual-link id="vl-vnfmnetwork-V4">
            <name>V4_Network</name>
            <description>the network to external core network for VNFM</description>
            <subnets>
                <subnet>
                    <properties>
                        <property id="gatewayIP">192.167.0.1</property>
                        <property id="subnetAddress">192.167.0.0/16	</property>
                        <property id="subnetName">V4_Subnet</property>
                        <property id="ipVersion">4</property>
                        <property id="disableGateway">FALSE</property>
                        <property id="portSecurityGroups">default</property>
                    </properties>
                </subnet>
            </subnets>
            <properties>
                <property id="adminStateUp">true</property>
            </properties>
        </virtual-link>
        <virtual-link id="vl-vnfmnetwork-management-vsix">
            <name>V6_Net</name>
            <description>the network to external core network for VNFM</description>
            <subnets>
                <subnet>
                    <properties>
                        <property id="gatewayIP">fdb9:8c62:787f:2474::1</property>
                        <property id="subnetAddress">fdb9:8c62:787f:2474::/64</property>
                        <property id="subnetName">V6_Subnet</property>
                        <property id="ipVersion">6</property>
                        <property id="disableGateway">FALSE</property>
                        <property id="portSecurityGroups">default</property>
                    </properties>
                </subnet>
            </subnets>
            <properties>
                <property id="adminStateUp">true</property>
            </properties>
        </virtual-link>
        <virtual-link id="vl-vnfmnetwork-management-dual">
            <name>Dual_Net</name>
            <description>the network to external core network for VNFM</description>
            <subnets>
                <subnet>
                    <properties>
                        <property id="gatewayIP">fd6d:8ea3:556e:aae5::1</property>
                        <property id="subnetAddress">fd6d:8ea3:556e:aae5::/64</property>
                        <property id="subnetName">Dual_Subnet</property>
                        <property id="ipVersion">6</property>
                        <property id="disableGateway">FALSE</property>
                        <property id="portSecurityGroups">default</property>
                        <property id="dualPair">pair1</property>
                    </properties>
                </subnet>
                <subnet>
                    <properties>
                        <property id="gatewayIP">192.168.0.1</property>
                        <property id="subnetAddress">192.168.0.0/16</property>
                        <property id="subnetName">Dual_Subnet_V4</property>
                        <property id="ipVersion">4</property>
                        <property id="disableGateway">FALSE</property>
                        <property id="portSecurityGroups">default</property>
                        <property id="dualPair">pair1</property>
                    </properties>
                </subnet>
            </subnets>
            <properties>
                <property id="adminStateUp">true</property>
            </properties>
        </virtual-link>
    </virtual-links>
    <vnfcs>
        <vnfc id="eIUM_EMS">
            <name>VenusEMS</name>
            <description>eIUM EMS</description>
            <virtual-links>
                <!--virtual-link-ref>vl-vnfmnetwork-management-test</virtual-link-ref-->
				<virtual-link-ref>vl-vnfmnetwork-management-vsix</virtual-link-ref>
            </virtual-links>
        </vnfc>
		<vnfc id="eIUM_EMSG">
            <name>Jupiter</name>
            <description>eIUM DEMO</description>
            <virtual-links>
                <virtual-link-ref>vl-vnfmnetwork-V4</virtual-link-ref>				
            </virtual-links>
        </vnfc>
		<vnfc id="eIUM_EMSH">
            <name>Saturn</name>
            <description>eIUM DEMO</description>
            <virtual-links>
                <virtual-link-ref>vl-vnfmnetwork-management-test</virtual-link-ref>				
            </virtual-links>
        </vnfc>
    </vnfcs>
    <flavors>
        <flavor id="F2">
            <name>Medium Deployment</name>
            <description>A Medium Deployment Example</description>
            <scaling>
                <settings>
                    <maxLevel>10</maxLevel>
                </settings>
                <aspects>
                    <scalingAspect id="base" name="base">
                        <description>BES machines</description>
                        <associatedGroup>
                            <vnfdElementGroup id="eiumbesgroupid">
                                <description>demo bes hosts</description>
                                <vdus>
                                    <vduRef ref="F2-eIUM_EMS" target="scaleout"/>
                                </vdus>
                            </vnfdElementGroup>
                        </associatedGroup>
                        <maxScaleLevel>5</maxScaleLevel>
                    </scalingAspect>
                </aspects>
            </scaling>
            <vdus>
                <vdu id="F2-eIUM_EMS" type="VM" name="">
                    <order>1</order>
                    <backupAllowed>true</backupAllowed>
                    <restoreAllowed>true</restoreAllowed>
                    <vnfc-ref>eIUM_EMS</vnfc-ref>
                    <vm-spec>
                        <uri>String</uri>
                    </vm-spec>
                    <vm-flavor>v1.m1.d1</vm-flavor>
                    <assignFloatingIP>true</assignFloatingIP>
                    <affinity-groups>
                        <affinity-group-ref>group-a</affinity-group-ref>
                    </affinity-groups>
					<!--<high-availability type="active-standby">
                        <min-instances-active>1</min-instances-active>
                        <min-instances-standby>1</min-instances-standby>
                        <ha-scaling-strategy>shift</ha-scaling-strategy>
                    </high-availability> -->
                    <virtualComputeDescRef ref="basicComputeRequirements"/>
                    <swImageDescRef ref="openstackimageex"/>
                    <virtualStorageRefs>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor"/>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor2" mountPoint="/dev/xvdz"/>
                    </virtualStorageRefs>
                    <script>
                        <description xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">script for eIUM EMS</description>
                        <property name="HostIP" value="${vdu.privateIp['V6_Net']}"/>
                        <property name="HostName" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="username" value="root" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="password" value="hwroot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="vnfc_artifacts" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="destinationRemotePath" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="ium_instance_id" value="SIU_EMS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="HOSTID" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        
                        <configure description="configure" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <sshPing attempts="20" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="mkdir -p ${destinationRemotePath}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateReplacement replacementDest="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" templateInputValue="INSTANCEID=${ium_instance_id},HOSTID=${HOSTID}" templatePath="${vnfc_artifacts}/install_unix_demo_ems.opt_template"/>
                            <scp46 file="${vnfc_artifacts}/local_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/US_export_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/jdk-8u102-linux-x64.tar.gz" password="${password}" todir="root@${HostIP}:/opt/" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/IUM-9.0-setup-Linux.bin" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/MySql-5.7.17-9.0-Linux.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/CIS-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/license.config" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/SecurityServer-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/eIUM90FP02.20181211-1211.patch" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <sshexec command="echo ${HostIP} ${HostName}.novalocal ${HostName} &gt;&gt; /etc/hosts" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="rm -rf /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd /opt/ ; tar -zxvf jdk-8u102-linux-x64.tar.gz " host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="sed -i 's/manage_etc_hosts: true/#manage_etc_hosts: true/g' /etc/cloud/cloud.cfg" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv /opt/jdk1.8.0_102/jre/lib/security/local_policy.jar /opt/jdk1.8.0_102/jre/lib/security/US_export_policy.jar /root/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv ${destinationRemotePath}/local_policy.jar ${destinationRemotePath}/US_export_policy.jar /opt/jdk1.8.0_102/jre/lib/security/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd ${destinationRemotePath}; chmod   +x IUM-9.0-setup-Linux.bin; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; ./IUM-9.0-setup-Linux.bin -i silent -f ${destinationRemotePath}/install_unix_demo_ems.opt_${HostName}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setEmsIP emsIP="${HostIP}"/>
                            <setRegistryUrl registryUrl="https://${HostIP}:8158/"/>                            
						</configure>
                        <target description="ANT_TASK" name="ANTTASK">						
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="1" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}" failOnError="true"/>                            
                        </target>						
						<update description="update" level="1">
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="10" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="2">
                            <sshexec command="rm -rf /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="3">
                        </update>
                        <start description="start">
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </start>
                        <stop description="stop">
                            <sshexec command="/etc/init.d/${ium_instance_id} stop" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </stop>
                        <terminate description="terminate operation">
                            <echo message="terminate at application layer."/>
                        </terminate>
                        <target description="CacheRTest" name="Readcache">
                            <cache key="emsIp" method="read" property="emsIp"/>
                            <echo message="WRITE user defined target ${emsIp}"/>
						</target>
                        <target description="CacheWTest" name="Writecache">
                            <cache key="emsIp" method="write" property="emsIp"/>
                            <echo message="Write user defined target"/>
						</target>
                        <target description="user defined" name="lbadd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <echo message="user defined target"/>
                            <templateServiceBridge registryUrl="https://${HostIP}:8158/" templateFilePath="templates/factory/JDS/JDS_File_Producer.config" templateInputValue="SelectedHost=servicetest,CollectorName=vDRA1"/>
						</target>
                        <target description="install a" name="target1">
                            <echo message="install.a user defined target"/>
                            <sshexec command="mkdir -p target1" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <scp4646 file="${vnfc_artifacts}/Vishnu.xml" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                        </target>
                        <target description="Deploy vSPC_WifiAcctInterface" name="Deploy_vSPC_Radius_WifiAcctInt" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_WifiAcctInterface.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},Nodes_CouchbaseCluster1=[${cbClusterKnownNodes}],Password_SPCWIFI=${dbBucketPassword_SPCWIFI},Password_cbwifi=${dbBucketPassword_SPCWIFI},Password_SPCCOMMON=${dbBucketPassword_SPCCOMMON},Password_cbcommon=${dbBucketPassword_SPCCOMMON},PeerAddress_X2Server=x2interfacehost1:9992,SPS_FILENAME_Environment='${HostName}_WIFIACCT1_'yyyyMMddHHmmssSSS'.SPS',SET_SPC_PROCID1_Environment=${HostName},SET_SPC_AuditFeNodeString1_Environment=${HostName},LogFile_LogHandler=/var/opt/${ium_instance_id}/log/Alarming_vSPC_WifiAcctInterface_${HostName}.log,ListenPort_PROCESS=5011,SelectedHost=${HOSTID},CollectorName=vSPC_WifiAcctInterface_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_FileCollection" name="Deploy_vSPC_Radius_FileCollection" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_FileCollection.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},ListenPort_PROCESS=5013,SelectedHost=${HOSTID},CollectorName=vSPC_FileCollection_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_AlarmAgent" name="Deploy_vSPC_AlarmAgent" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_AlarmAgent.cfg" templateInputValue="CUSTOMER_EMAIL=${customer_email},HOSTNAME_Environment=${HOSTID},ListenPort_PROCESS=5010,SelectedHost=${HOSTID},CollectorName=vSPC_AlarmAgent_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="install b" name="target2">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target2" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target3">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target3" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target4">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target4" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target5">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target5" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <scaleout description="scaleOut" level="1">
                            <echo message="scale out called on Vishnu1 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="2">
                            <echo message="scale out called on Vishnu2 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="3">
                            <echo message="scale out called on Vishnu3 machine"/>							
                        </scaleout>
                        <scalein description="scaleIn" level="1">
                            <echo message="scale IN called on eIUM machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="2">
                            <echo message="scale IN called on eIUM2 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="3">
                            <echo message="scale IN called on eIUM3 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
                        <preprocess target="instantiate">
                            <echo message="pre process for instanciate called"/>
                        </preprocess>
                        <postprocess target="instantiate">
                            <echo message="postprocess for instanciate called"/>
                        </postprocess>
                        <preprocess target="configure">
                            <echo message="pre process for configure called"/>
                        </preprocess>
                        <postprocess target="configure">
                            <echo message="postprocess for configure called"/>
                        </postprocess>
                        <preprocess target="user.defined.target">
                            <echo message="preprocess for user.defined.target called"/>
                        </preprocess>
                        <preprocess target="terminate">
                            <echo message="preprocess for terminate called"/>
                        </preprocess>
                        <postprocess target="terminate">
                            <echo message="postprocess for terminate called"/>
                        </postprocess>
                    </script>
                    <kpis>
                        <kpi id="KPI_FreeMemory">
                            <description>Getting Free Memory</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>FreeMemory</attributeName>
                        </kpi>
                        <kpi id="KPI_CpuUsage">
                            <description>Getting CPU Usage</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>CpuUsage</attributeName>
                        </kpi>
                    </kpis>
                </vdu>
				<!-- <property id="providerId">openstack</property>
				<property id="region">regionOne</property>
				<property id="configDrive">true</property>
				<property id="userName">cis</property>
				<property id="credential">cis</property>				
				<property id="project">cis_project</property>
				<property id="tenantId">9b247c7d8f474c4f8c79fb0f123779a5</property>
				<property id="endPoint">http://30.104.2.13:5000/v2.0</property>
				<property id="domain">Default</property>
				<property id="keyPairName">wkey</property>
				<property id="keyPairPublicKey">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCcbw9nwjUbExEfWDseYZklrX7nZlP2xhPDX5AeiL44Uxr2cAiSf9zQDHEeyOdTjO1W6/J4kYmz7HN6hAliorXn nymsZ7YactGImWpmDSF34Ee1nuwXtLNJOnKPR28QHSyUvjMDxr1 iyZWnkhecQ9fFKRWJwJu9Au9b8rZFEqH0p3BzOypb8addwFOPVnalR6zHLrr5qiqd60hY9UXiwtbZgs P1QtJUIeOI1s8o1 YOjgTIy5vfBfYtDqUCD6QKh5bvR2W9X64JApE1oaXP9S5I8pNzuoxk38lfSOmkEMbNzSYi3Ibm0l6tKDIx3vkcRjq4nCAZ6TYwS7yGaj/2p imported-openssh-key
				</property>
				<property id="imageName">rhel67</property>
				<property id="volumeSize">50</property>
				<property id="deleteVolumeOnTermination">true</property>
				<property id="deleteSnapshotsBeforeVolume">true</property>
				<property id="waitForSnapshotCreation">true</property>
				<property id="snapshotCreationWaitTimeout">1300</property>
				<property id="bootSource">IMAGE</property>
				<property id="volumeCreateTimeout">1200</property>
				<property id="volumeAvailabilityZone">nova</property>
				<property id="instanceAvailabilityZone">AZ1</property>
				<property id="modules">org.jclouds.logging.slf4j.config.SLF4JLoggingModule</property>
				<property id="cleanUpNetworkResourcesOnTermination">true</property>
				<property id="createVirtualIPs">true</property>
				<property id="floatingIPNet">nova</property> -->
				<vdu id="F2-eIUM_EMSG" type="VM" name="">
                    <order>2</order>
                    <backupAllowed>true</backupAllowed>
                    <restoreAllowed>true</restoreAllowed>
                    <vnfc-ref>eIUM_EMSG</vnfc-ref>
                    <vm-spec>
                        <uri>String</uri>
                    </vm-spec>
                    <vm-flavor>v1.m1.d1</vm-flavor>
                    <assignFloatingIP>true</assignFloatingIP>
                    <affinity-groups>
                        <affinity-group-ref>group-a</affinity-group-ref>
                    </affinity-groups>
					<!--<high-availability type="active-standby">
                        <min-instances-active>1</min-instances-active>
                        <min-instances-standby>1</min-instances-standby>
                        <ha-scaling-strategy>shift</ha-scaling-strategy>
                    </high-availability> -->
                    <virtualComputeDescRef ref="basicComputeRequirements"/>
                    <swImageDescRef ref="openstackimageex"/>
                    <virtualStorageRefs>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor"/>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor2" mountPoint="/dev/xvdz"/>
                    </virtualStorageRefs>
                    <script>
                        <description xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">script for eIUM EMS</description>
                        <property name="HostIP" value="${vdu.privateIp['V4_Network']}"/>
                        <property name="HostName" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="username" value="root" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="password" value="hwroot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="vnfc_artifacts" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="destinationRemotePath" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="ium_instance_id" value="SIU_EMS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="HOSTID" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        
                        <configure description="configure" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <sshPing attempts="20" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="mkdir -p ${destinationRemotePath}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateReplacement replacementDest="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" templateInputValue="INSTANCEID=${ium_instance_id},HOSTID=${HOSTID}" templatePath="${vnfc_artifacts}/install_unix_demo_ems.opt_template"/>
                            <scp file="${vnfc_artifacts}/local_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/US_export_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/jdk-8u102-linux-x64.tar.gz" password="${password}" todir="root@${HostIP}:/opt/" trust="true"/>
                            <scp file="${vnfc_artifacts}/IUM-9.0-setup-Linux.bin" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/MySql-5.7.17-9.0-Linux.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/CIS-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/license.config" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/SecurityServer-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/eIUM90FP02.20181211-1211.patch" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <sshexec command="echo ${HostIP} ${HostName}.novalocal ${HostName} &gt;&gt; /etc/hosts" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="rm -rf /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd /opt/ ; tar -zxvf jdk-8u102-linux-x64.tar.gz " host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="sed -i 's/manage_etc_hosts: true/#manage_etc_hosts: true/g' /etc/cloud/cloud.cfg" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv /opt/jdk1.8.0_102/jre/lib/security/local_policy.jar /opt/jdk1.8.0_102/jre/lib/security/US_export_policy.jar /root/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv ${destinationRemotePath}/local_policy.jar ${destinationRemotePath}/US_export_policy.jar /opt/jdk1.8.0_102/jre/lib/security/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd ${destinationRemotePath}; chmod   +x IUM-9.0-setup-Linux.bin; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; ./IUM-9.0-setup-Linux.bin -i silent -f ${destinationRemotePath}/install_unix_demo_ems.opt_${HostName}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setEmsIP emsIP="${HostIP}"/>
                            <setRegistryUrl registryUrl="https://${HostIP}:8158/"/>                            
						</configure>
                        <target description="ANT_TASK" name="ANTTASK">						
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="1" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}" failOnError="true"/>                            
                        </target>						
						<update description="update" level="1">
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="10" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="2">
                            <sshexec command="rm -rf /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="3">
                        </update>
                        <start description="start">
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </start>
                        <stop description="stop">
                            <sshexec command="/etc/init.d/${ium_instance_id} stop" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </stop>
                        <terminate description="terminate operation">
                            <echo message="terminate at application layer."/>
                        </terminate>
                        <target description="CacheRTest" name="Readcache">
                            <cache key="emsIp" method="read" property="emsIp"/>
                            <echo message="WRITE user defined target ${emsIp}"/>
						</target>
                        <target description="CacheWTest" name="Writecache">
                            <cache key="emsIp" method="write" property="emsIp"/>
                            <echo message="Write user defined target"/>
						</target>
                        <target description="user defined" name="lbadd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <echo message="user defined target"/>
                            <templateServiceBridge registryUrl="https://${HostIP}:8158/" templateFilePath="templates/factory/JDS/JDS_File_Producer.config" templateInputValue="SelectedHost=servicetest,CollectorName=vDRA1"/>
						</target>
                        <target description="install a" name="target1">
                            <echo message="install.a user defined target"/>
                            <sshexec command="mkdir -p target1" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <scp4646 file="${vnfc_artifacts}/Vishnu.xml" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                        </target>
                        <target description="Deploy vSPC_WifiAcctInterface" name="Deploy_vSPC_Radius_WifiAcctInt" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_WifiAcctInterface.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},Nodes_CouchbaseCluster1=[${cbClusterKnownNodes}],Password_SPCWIFI=${dbBucketPassword_SPCWIFI},Password_cbwifi=${dbBucketPassword_SPCWIFI},Password_SPCCOMMON=${dbBucketPassword_SPCCOMMON},Password_cbcommon=${dbBucketPassword_SPCCOMMON},PeerAddress_X2Server=x2interfacehost1:9992,SPS_FILENAME_Environment='${HostName}_WIFIACCT1_'yyyyMMddHHmmssSSS'.SPS',SET_SPC_PROCID1_Environment=${HostName},SET_SPC_AuditFeNodeString1_Environment=${HostName},LogFile_LogHandler=/var/opt/${ium_instance_id}/log/Alarming_vSPC_WifiAcctInterface_${HostName}.log,ListenPort_PROCESS=5011,SelectedHost=${HOSTID},CollectorName=vSPC_WifiAcctInterface_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_FileCollection" name="Deploy_vSPC_Radius_FileCollection" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_FileCollection.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},ListenPort_PROCESS=5013,SelectedHost=${HOSTID},CollectorName=vSPC_FileCollection_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_AlarmAgent" name="Deploy_vSPC_AlarmAgent" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_AlarmAgent.cfg" templateInputValue="CUSTOMER_EMAIL=${customer_email},HOSTNAME_Environment=${HOSTID},ListenPort_PROCESS=5010,SelectedHost=${HOSTID},CollectorName=vSPC_AlarmAgent_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="install b" name="target2">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target2" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target3">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target3" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target4">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target4" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target5">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target5" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <scaleout description="scaleOut" level="1">
                            <echo message="scale out called on Vishnu1 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="2">
                            <echo message="scale out called on Vishnu2 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="3">
                            <echo message="scale out called on Vishnu3 machine"/>							
                        </scaleout>
                        <scalein description="scaleIn" level="1">
                            <echo message="scale IN called on eIUM machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="2">
                            <echo message="scale IN called on eIUM2 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="3">
                            <echo message="scale IN called on eIUM3 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
                        <preprocess target="instantiate">
                            <echo message="pre process for instanciate called"/>
                        </preprocess>
                        <postprocess target="instantiate">
                            <echo message="postprocess for instanciate called"/>
                        </postprocess>
                        <preprocess target="configure">
                            <echo message="pre process for configure called"/>
                        </preprocess>
                        <postprocess target="configure">
                            <echo message="postprocess for configure called"/>
                        </postprocess>
                        <preprocess target="user.defined.target">
                            <echo message="preprocess for user.defined.target called"/>
                        </preprocess>
                        <preprocess target="terminate">
                            <echo message="preprocess for terminate called"/>
                        </preprocess>
                        <postprocess target="terminate">
                            <echo message="postprocess for terminate called"/>
                        </postprocess>
                    </script>
                    <kpis>
                        <kpi id="KPI_FreeMemory">
                            <description>Getting Free Memory</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>FreeMemory</attributeName>
                        </kpi>
                        <kpi id="KPI_CpuUsage">
                            <description>Getting CPU Usage</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>CpuUsage</attributeName>
                        </kpi>
                    </kpis>
                </vdu>
            </vdus>
        </flavor>
		<flavor id="F4">
            <name>Medium Deployment</name>
            <description>A Medium Deployment Example</description>
            <scaling>
                <settings>
                    <maxLevel>10</maxLevel>
                </settings>
                <aspects>
                    <scalingAspect id="base" name="base">
                        <description>BES machines</description>
                        <associatedGroup>
                            <vnfdElementGroup id="eiumbesgroupid">
                                <description>demo bes hosts</description>
                                <vdus>
                                    <vduRef ref="F2-eIUM_EMS" target="scaleout"/>
                                </vdus>
                            </vnfdElementGroup>
                        </associatedGroup>
                        <maxScaleLevel>5</maxScaleLevel>
                    </scalingAspect>
                </aspects>
            </scaling>
            <vdus>
                <vdu id="F2-eIUM_EMS" type="VM" name="">
                    <order>1</order>
                    <backupAllowed>true</backupAllowed>
                    <restoreAllowed>true</restoreAllowed>
                    <vnfc-ref>eIUM_EMS</vnfc-ref>
                    <vm-spec>
                        <uri>String</uri>
                    </vm-spec>
                    <vm-flavor>v1.m1.d1</vm-flavor>
                    <assignFloatingIP>true</assignFloatingIP>
                    <affinity-groups>
                        <affinity-group-ref>group-a</affinity-group-ref>
                    </affinity-groups>
					<!--<high-availability type="active-standby">
                        <min-instances-active>1</min-instances-active>
                        <min-instances-standby>1</min-instances-standby>
                        <ha-scaling-strategy>shift</ha-scaling-strategy>
                    </high-availability> -->
                    <virtualComputeDescRef ref="basicComputeRequirements"/>
                    <swImageDescRef ref="openstackimageex"/>
                    <virtualStorageRefs>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor"/>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor2" mountPoint="/dev/xvdz"/>
                    </virtualStorageRefs>
                    <script>
                        <description xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">script for eIUM EMS</description>
                        <property name="HostIP" value="${vdu.privateIp['V6_Net']}"/>
                        <property name="HostName" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="username" value="root" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="password" value="hwroot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="vnfc_artifacts" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="destinationRemotePath" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="ium_instance_id" value="SIU_EMS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="HOSTID" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        
                        <configure description="configure" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <sshPing attempts="20" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="mkdir -p ${destinationRemotePath}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateReplacement replacementDest="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" templateInputValue="INSTANCEID=${ium_instance_id},HOSTID=${HOSTID}" templatePath="${vnfc_artifacts}/install_unix_demo_ems.opt_template"/>
                            <scp46 file="${vnfc_artifacts}/local_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/US_export_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/jdk-8u102-linux-x64.tar.gz" password="${password}" todir="root@${HostIP}:/opt/" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/IUM-9.0-setup-Linux.bin" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/MySql-5.7.17-9.0-Linux.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/CIS-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/license.config" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/SecurityServer-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp46 file="${vnfc_artifacts}/eIUM90FP02.20181211-1211.patch" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <sshexec command="echo ${HostIP} ${HostName}.novalocal ${HostName} &gt;&gt; /etc/hosts" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="rm -rf /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd /opt/ ; tar -zxvf jdk-8u102-linux-x64.tar.gz " host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="sed -i 's/manage_etc_hosts: true/#manage_etc_hosts: true/g' /etc/cloud/cloud.cfg" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv /opt/jdk1.8.0_102/jre/lib/security/local_policy.jar /opt/jdk1.8.0_102/jre/lib/security/US_export_policy.jar /root/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv ${destinationRemotePath}/local_policy.jar ${destinationRemotePath}/US_export_policy.jar /opt/jdk1.8.0_102/jre/lib/security/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd ${destinationRemotePath}; chmod   +x IUM-9.0-setup-Linux.bin; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; ./IUM-9.0-setup-Linux.bin -i silent -f ${destinationRemotePath}/install_unix_demo_ems.opt_${HostName}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setEmsIP emsIP="${HostIP}"/>
                            <setRegistryUrl registryUrl="https://${HostIP}:8158/"/>                            
						</configure>
                        <target description="ANT_TASK" name="ANTTASK">						
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="1" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}" failOnError="true"/>                            
                        </target>						
						<update description="update" level="1">
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="10" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="2">
                            <sshexec command="rm -rf /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="3">
                        </update>
                        <start description="start">
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </start>
                        <stop description="stop">
                            <sshexec command="/etc/init.d/${ium_instance_id} stop" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </stop>
                        <terminate description="terminate operation">
                            <echo message="terminate at application layer."/>
                        </terminate>
                        <target description="CacheRTest" name="Readcache">
                            <cache key="emsIp" method="read" property="emsIp"/>
                            <echo message="WRITE user defined target ${emsIp}"/>
						</target>
                        <target description="CacheWTest" name="Writecache">
                            <cache key="emsIp" method="write" property="emsIp"/>
                            <echo message="Write user defined target"/>
						</target>
                        <target description="user defined" name="lbadd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <echo message="user defined target"/>
                            <templateServiceBridge registryUrl="https://${HostIP}:8158/" templateFilePath="templates/factory/JDS/JDS_File_Producer.config" templateInputValue="SelectedHost=servicetest,CollectorName=vDRA1"/>
						</target>
                        <target description="install a" name="target1">
                            <echo message="install.a user defined target"/>
                            <sshexec command="mkdir -p target1" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <scp4646 file="${vnfc_artifacts}/Vishnu.xml" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                        </target>
                        <target description="Deploy vSPC_WifiAcctInterface" name="Deploy_vSPC_Radius_WifiAcctInt" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_WifiAcctInterface.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},Nodes_CouchbaseCluster1=[${cbClusterKnownNodes}],Password_SPCWIFI=${dbBucketPassword_SPCWIFI},Password_cbwifi=${dbBucketPassword_SPCWIFI},Password_SPCCOMMON=${dbBucketPassword_SPCCOMMON},Password_cbcommon=${dbBucketPassword_SPCCOMMON},PeerAddress_X2Server=x2interfacehost1:9992,SPS_FILENAME_Environment='${HostName}_WIFIACCT1_'yyyyMMddHHmmssSSS'.SPS',SET_SPC_PROCID1_Environment=${HostName},SET_SPC_AuditFeNodeString1_Environment=${HostName},LogFile_LogHandler=/var/opt/${ium_instance_id}/log/Alarming_vSPC_WifiAcctInterface_${HostName}.log,ListenPort_PROCESS=5011,SelectedHost=${HOSTID},CollectorName=vSPC_WifiAcctInterface_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_FileCollection" name="Deploy_vSPC_Radius_FileCollection" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_FileCollection.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},ListenPort_PROCESS=5013,SelectedHost=${HOSTID},CollectorName=vSPC_FileCollection_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_AlarmAgent" name="Deploy_vSPC_AlarmAgent" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_AlarmAgent.cfg" templateInputValue="CUSTOMER_EMAIL=${customer_email},HOSTNAME_Environment=${HOSTID},ListenPort_PROCESS=5010,SelectedHost=${HOSTID},CollectorName=vSPC_AlarmAgent_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="install b" name="target2">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target2" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target3">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target3" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target4">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target4" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target5">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target5" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <scaleout description="scaleOut" level="1">
                            <echo message="scale out called on Vishnu1 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="2">
                            <echo message="scale out called on Vishnu2 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="3">
                            <echo message="scale out called on Vishnu3 machine"/>							
                        </scaleout>
                        <scalein description="scaleIn" level="1">
                            <echo message="scale IN called on eIUM machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="2">
                            <echo message="scale IN called on eIUM2 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="3">
                            <echo message="scale IN called on eIUM3 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
                        <preprocess target="instantiate">
                            <echo message="pre process for instanciate called"/>
                        </preprocess>
                        <postprocess target="instantiate">
                            <echo message="postprocess for instanciate called"/>
                        </postprocess>
                        <preprocess target="configure">
                            <echo message="pre process for configure called"/>
                        </preprocess>
                        <postprocess target="configure">
                            <echo message="postprocess for configure called"/>
                        </postprocess>
                        <preprocess target="user.defined.target">
                            <echo message="preprocess for user.defined.target called"/>
                        </preprocess>
                        <preprocess target="terminate">
                            <echo message="preprocess for terminate called"/>
                        </preprocess>
                        <postprocess target="terminate">
                            <echo message="postprocess for terminate called"/>
                        </postprocess>
                    </script>
                    <kpis>
                        <kpi id="KPI_FreeMemory">
                            <description>Getting Free Memory</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>FreeMemory</attributeName>
                        </kpi>
                        <kpi id="KPI_CpuUsage">
                            <description>Getting CPU Usage</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>CpuUsage</attributeName>
                        </kpi>
                    </kpis>
                </vdu>
				<!-- <property id="providerId">openstack</property>
				<property id="region">regionOne</property>
				<property id="configDrive">true</property>
				<property id="userName">cis</property>
				<property id="credential">cis</property>				
				<property id="project">cis_project</property>
				<property id="tenantId">9b247c7d8f474c4f8c79fb0f123779a5</property>
				<property id="endPoint">http://30.104.2.13:5000/v2.0</property>
				<property id="domain">Default</property>
				<property id="keyPairName">wkey</property>
				<property id="keyPairPublicKey">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCcbw9nwjUbExEfWDseYZklrX7nZlP2xhPDX5AeiL44Uxr2cAiSf9zQDHEeyOdTjO1W6/J4kYmz7HN6hAliorXn nymsZ7YactGImWpmDSF34Ee1nuwXtLNJOnKPR28QHSyUvjMDxr1 iyZWnkhecQ9fFKRWJwJu9Au9b8rZFEqH0p3BzOypb8addwFOPVnalR6zHLrr5qiqd60hY9UXiwtbZgs P1QtJUIeOI1s8o1 YOjgTIy5vfBfYtDqUCD6QKh5bvR2W9X64JApE1oaXP9S5I8pNzuoxk38lfSOmkEMbNzSYi3Ibm0l6tKDIx3vkcRjq4nCAZ6TYwS7yGaj/2p imported-openssh-key
				</property>
				<property id="imageName">rhel67</property>
				<property id="volumeSize">50</property>
				<property id="deleteVolumeOnTermination">true</property>
				<property id="deleteSnapshotsBeforeVolume">true</property>
				<property id="waitForSnapshotCreation">true</property>
				<property id="snapshotCreationWaitTimeout">1300</property>
				<property id="bootSource">IMAGE</property>
				<property id="volumeCreateTimeout">1200</property>
				<property id="volumeAvailabilityZone">nova</property>
				<property id="instanceAvailabilityZone">AZ1</property>
				<property id="modules">org.jclouds.logging.slf4j.config.SLF4JLoggingModule</property>
				<property id="cleanUpNetworkResourcesOnTermination">true</property>
				<property id="createVirtualIPs">true</property>
				<property id="floatingIPNet">nova</property> -->
				<vdu id="F2-eIUM_EMSG" type="VM" name="">
                    <order>2</order>
                    <backupAllowed>true</backupAllowed>
                    <restoreAllowed>true</restoreAllowed>
                    <vnfc-ref>eIUM_EMSG</vnfc-ref>
                    <vm-spec>
                        <uri>String</uri>
                    </vm-spec>
                    <vm-flavor>v1.m1.d1</vm-flavor>
                    <assignFloatingIP>true</assignFloatingIP>
                    <affinity-groups>
                        <affinity-group-ref>group-a</affinity-group-ref>
                    </affinity-groups>
					<!--<high-availability type="active-standby">
                        <min-instances-active>1</min-instances-active>
                        <min-instances-standby>1</min-instances-standby>
                        <ha-scaling-strategy>shift</ha-scaling-strategy>
                    </high-availability> -->
                    <virtualComputeDescRef ref="basicComputeRequirements"/>
                    <swImageDescRef ref="openstackimageex"/>
                    <virtualStorageRefs>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor"/>
                        <virtualStorageDescRef ref="extraStorageVolumeDescriptor2" mountPoint="/dev/xvdz"/>
                    </virtualStorageRefs>
                    <script>
                        <description xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">script for eIUM EMS</description>
                        <property name="HostIP" value="${vdu.privateIp['V4_Network']}"/>
                        <property name="HostName" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="username" value="root" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="password" value="hwroot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="vnfc_artifacts" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="destinationRemotePath" value="/root/eium" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="ium_instance_id" value="SIU_EMS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        <property name="HOSTID" value="${vdu.serverName}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        
                        <configure description="configure" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <sshPing attempts="20" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="mkdir -p ${destinationRemotePath}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateReplacement replacementDest="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" templateInputValue="INSTANCEID=${ium_instance_id},HOSTID=${HOSTID}" templatePath="${vnfc_artifacts}/install_unix_demo_ems.opt_template"/>
                            <scp file="${vnfc_artifacts}/local_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/US_export_policy.jar" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/jdk-8u102-linux-x64.tar.gz" password="${password}" todir="root@${HostIP}:/opt/" trust="true"/>
                            <scp file="${vnfc_artifacts}/IUM-9.0-setup-Linux.bin" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/MySql-5.7.17-9.0-Linux.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/CIS-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/license.config" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/SecurityServer-9.0.iummodule.zip" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/install_unix_demo_ems.opt_${HostName}" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <scp file="${vnfc_artifacts}/eIUM90FP02.20181211-1211.patch" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                            <sshexec command="echo ${HostIP} ${HostName}.novalocal ${HostName} &gt;&gt; /etc/hosts" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="rm -rf /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/hostname" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd /opt/ ; tar -zxvf jdk-8u102-linux-x64.tar.gz " host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="sed -i 's/manage_etc_hosts: true/#manage_etc_hosts: true/g' /etc/cloud/cloud.cfg" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv /opt/jdk1.8.0_102/jre/lib/security/local_policy.jar /opt/jdk1.8.0_102/jre/lib/security/US_export_policy.jar /root/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="mv ${destinationRemotePath}/local_policy.jar ${destinationRemotePath}/US_export_policy.jar /opt/jdk1.8.0_102/jre/lib/security/" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="cd ${destinationRemotePath}; chmod   +x IUM-9.0-setup-Linux.bin; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; ./IUM-9.0-setup-Linux.bin -i silent -f ${destinationRemotePath}/install_unix_demo_ems.opt_${HostName}" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <setEmsIP emsIP="${HostIP}"/>
                            <setRegistryUrl registryUrl="https://${HostIP}:8158/"/>                            
						</configure>
                        <target description="ANT_TASK" name="ANTTASK">						
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="1" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}" failOnError="true"/>                            
                        </target>						
						<update description="update" level="1">
                            <sshexec command="cd ${destinationRemotePath}; export JAVA_HOME=/opt/jdk1.8.0_102/bin/java; export PATH=$PATH:/opt/jdk1.8.0_102/bin; java -jar eIUM83VDRA12.SNAPSHOT-211aaa3e138.patch.unsigned /opt/${ium_instance_id} &amp;" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <checkEiumActivation attempts="10" checkCommand="ps -ef|grep adminagentserver" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/>
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="2">
                            <sshexec command="rm -rf /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <sshexec command="echo ${HostName} &gt;&gt; /etc/Vishnu" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </update>
                        <update description="update" level="3">
                        </update>
                        <start description="start">
                            <sshexec command="/etc/init.d/${ium_instance_id} start" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </start>
                        <stop description="stop">
                            <sshexec command="/etc/init.d/${ium_instance_id} stop" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </stop>
                        <terminate description="terminate operation">
                            <echo message="terminate at application layer."/>
                        </terminate>
                        <target description="CacheRTest" name="Readcache">
                            <cache key="emsIp" method="read" property="emsIp"/>
                            <echo message="WRITE user defined target ${emsIp}"/>
						</target>
                        <target description="CacheWTest" name="Writecache">
                            <cache key="emsIp" method="write" property="emsIp"/>
                            <echo message="Write user defined target"/>
						</target>
                        <target description="user defined" name="lbadd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <echo message="user defined target"/>
                            <templateServiceBridge registryUrl="https://${HostIP}:8158/" templateFilePath="templates/factory/JDS/JDS_File_Producer.config" templateInputValue="SelectedHost=servicetest,CollectorName=vDRA1"/>
						</target>
                        <target description="install a" name="target1">
                            <echo message="install.a user defined target"/>
                            <sshexec command="mkdir -p target1" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                            <scp4646 file="${vnfc_artifacts}/Vishnu.xml" password="${password}" todir="root@${HostIP}:${destinationRemotePath}" trust="true"/>
                        </target>
                        <target description="Deploy vSPC_WifiAcctInterface" name="Deploy_vSPC_Radius_WifiAcctInt" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_WifiAcctInterface.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},Nodes_CouchbaseCluster1=[${cbClusterKnownNodes}],Password_SPCWIFI=${dbBucketPassword_SPCWIFI},Password_cbwifi=${dbBucketPassword_SPCWIFI},Password_SPCCOMMON=${dbBucketPassword_SPCCOMMON},Password_cbcommon=${dbBucketPassword_SPCCOMMON},PeerAddress_X2Server=x2interfacehost1:9992,SPS_FILENAME_Environment='${HostName}_WIFIACCT1_'yyyyMMddHHmmssSSS'.SPS',SET_SPC_PROCID1_Environment=${HostName},SET_SPC_AuditFeNodeString1_Environment=${HostName},LogFile_LogHandler=/var/opt/${ium_instance_id}/log/Alarming_vSPC_WifiAcctInterface_${HostName}.log,ListenPort_PROCESS=5011,SelectedHost=${HOSTID},CollectorName=vSPC_WifiAcctInterface_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_FileCollection" name="Deploy_vSPC_Radius_FileCollection" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_FileCollection.cfg" templateInputValue="IUMInstance_Environment=${ium_instance_id},ListenPort_PROCESS=5013,SelectedHost=${HOSTID},CollectorName=vSPC_FileCollection_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="Deploy vSPC_AlarmAgent" name="Deploy_vSPC_AlarmAgent" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <propertyregex global="true" input="${HostName}" override="true" property="HOSTID" regexp="-" replace=""/>
                            <setHostId hostId="${HOSTID}"/>
                            <templateServiceBridge registryUrl="${registry_url}" templateFilePath="/root/eium/vSPC_AlarmAgent.cfg" templateInputValue="CUSTOMER_EMAIL=${customer_email},HOSTNAME_Environment=${HOSTID},ListenPort_PROCESS=5010,SelectedHost=${HOSTID},CollectorName=vSPC_AlarmAgent_${HOSTID},STARTUPMODE_Properties=Automatic"/>
                        </target>
                        <target description="install b" name="target2">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target2" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target3">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target3" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target4">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target4" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <target description="install b" name="target5">
                            <echo message="install.b user defined target"/>
                            <sshexec command="mkdir -p target5" host="${HostIP}" password="${password}" trust="true" username="${username}"/>
                        </target>
                        <scaleout description="scaleOut" level="1">
                            <echo message="scale out called on Vishnu1 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="2">
                            <echo message="scale out called on Vishnu2 machine"/>							
                        </scaleout>
						<scaleout description="scaleOut" level="3">
                            <echo message="scale out called on Vishnu3 machine"/>							
                        </scaleout>
                        <scalein description="scaleIn" level="1">
                            <echo message="scale IN called on eIUM machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="2">
                            <echo message="scale IN called on eIUM2 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
						<scalein description="scaleIn" level="3">
                            <echo message="scale IN called on eIUM3 machine"/>
							<!--checkEiumActivation attempts="5" checkCommand="ps -ef|grep adminagentserverrr" checkResponse="/opt/${ium_instance_id}/bin/adminagentserver" host="${HostIP}" password="${password}" username="${username}"/-->	
                        </scalein>
                        <preprocess target="instantiate">
                            <echo message="pre process for instanciate called"/>
                        </preprocess>
                        <postprocess target="instantiate">
                            <echo message="postprocess for instanciate called"/>
                        </postprocess>
                        <preprocess target="configure">
                            <echo message="pre process for configure called"/>
                        </preprocess>
                        <postprocess target="configure">
                            <echo message="postprocess for configure called"/>
                        </postprocess>
                        <preprocess target="user.defined.target">
                            <echo message="preprocess for user.defined.target called"/>
                        </preprocess>
                        <preprocess target="terminate">
                            <echo message="preprocess for terminate called"/>
                        </preprocess>
                        <postprocess target="terminate">
                            <echo message="postprocess for terminate called"/>
                        </postprocess>
                    </script>
                    <kpis>
                        <kpi id="KPI_FreeMemory">
                            <description>Getting Free Memory</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>FreeMemory</attributeName>
                        </kpi>
                        <kpi id="KPI_CpuUsage">
                            <description>Getting CPU Usage</description>
                            <server>emsvm</server>
                            <group>MgmtStat</group>
                            <clazz>ServerStat</clazz>
                            <instance>Server</instance>
                            <attributeName>CpuUsage</attributeName>
                        </kpi>
                    </kpis>
                </vdu>
            </vdus>
        </flavor>
    </flavors>
    <vnfIndicators>
        <kpi id="KPI_FreeMemory">
            <description>Getting Free Memory</description>
            <server>emsvm</server>
            <group>MgmtStat</group>
            <clazz>ServerStat</clazz>
            <instance>Server</instance>
            <attributeName>FreeMemory</attributeName>
        </kpi>
        <kpi id="KPI_CpuUsage">
            <description>Getting CPU Usage</description>
            <server>emsvm</server>
            <group>MgmtStat</group>
            <clazz>ServerStat</clazz>
            <instance>Server</instance>
            <attributeName>CpuUsage</attributeName>
        </kpi>
    </vnfIndicators>
    <images>
        <swImageDesc id="openstackimageex" name="Image for OpenStack" version="001">
            <checksum>some hash</checksum>
            <containerFormat>bare</containerFormat>
            <diskFormat>QCOW2</diskFormat>
            <minDisk>10</minDisk>
            <minRam>512</minRam>
            <size>3.7</size>
            <swImage>rhel67</swImage>
            <operatingSystem>RHEL 6.5 x86_64</operatingSystem>
            <supportedVirtualisationEnvironments>
                <supportedVirtualisationEnvironment>Helion OpenStack 2.1</supportedVirtualisationEnvironment>
                <supportedVirtualisationEnvironment>Helion CarrierGrade 2.0</supportedVirtualisationEnvironment>
            </supportedVirtualisationEnvironments>
            <properties>
                <property id="region">regionOne</property>
                <property id="availabilityZone">AZ1</property>
                <property id="configDrive">true</property>
            </properties>
        </swImageDesc>
        <swImageDesc id="defaultImage" name="Image for OpenStack" version="101">
            <checksum>#some@hash</checksum>
            <containerFormat>bare</containerFormat>
            <diskFormat>QCOW2</diskFormat>
            <minDisk>10</minDisk>
            <minRam>512</minRam>
            <size>3.7</size>
            <swImage>rhel67</swImage>
            <operatingSystem>RHEL 6.5 x86_64</operatingSystem>
            <supportedVirtualisationEnvironments>
                <supportedVirtualisationEnvironment>Helion OpenStack 2.1</supportedVirtualisationEnvironment>
                <supportedVirtualisationEnvironment>Helion CarrierGrade 2.0</supportedVirtualisationEnvironment>
            </supportedVirtualisationEnvironments>
        </swImageDesc>
    </images>
    <virtualStorage>
        <virtualStorageDesc id="defaultBootableVolume">
            <typeOfStorage>BOOTABLE_VOLUME</typeOfStorage>
            <sizeOfStorage>10</sizeOfStorage>
            <rdmaEnabled>true</rdmaEnabled>
            <swImageDesc ref="defaultImage"/>
            <properties>
                <property id="deleteVolumeOnTermination">true</property>
                <property id="volumeCreateTimeout">1200</property>
                <property id="volumeAvailabilityZone">nova</property>
            </properties>
        </virtualStorageDesc>
        <virtualStorageDesc id="extraStorageVolumeDescriptor">
            <sizeOfStorage>10</sizeOfStorage>
            <rdmaEnabled>false</rdmaEnabled>
            <properties>
                <property id="deleteVolumeOnTermination">true</property>
                <property id="mountPoint">/dev/xvdx</property>
            </properties>
        </virtualStorageDesc>
        <virtualStorageDesc id="extraStorageVolumeDescriptor2">
            <sizeOfStorage>10</sizeOfStorage>
            <rdmaEnabled>false</rdmaEnabled>
            <properties>
                <property id="deleteVolumeOnTermination">true</property>
                <property id="driver">local</property>
                <property id="mountPoint">/dev/xvdy</property>
            </properties>
        </virtualStorageDesc>
    </virtualStorage>
    <affinity-groups>
        <affinity-group name="group-a" type="affinity"/>
    </affinity-groups>
    <properties id="vim">
        <property id="providerId">openstack</property>
        <property id="region">regionOne</property>
        <property id="configDrive">true</property>
        <property id="userName">admin_IUM</property>
        <property id="credential">#DEC8;doL.6[G/</property>
        <!--property id="tenantName">IUM_Project</property-->
		<property id="project">IUM_Project</property>
        <property id="tenantId">f31887b0ec494e078958179bbf719a6d</property>
        <property id="endPoint">http://30.104.2.13:5000/v2.0</property>
		<!--property id="domain">Default</property-->
        <property id="keyPairName">wkey</property>
        <property id="keyPairPublicKey">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCcbw9nwjUbExEfWDseYZklrX7nZlP2xhPDX5AeiL44Uxr2cAiSf9zQDHEeyOdTjO1W6/J4kYmz7HN6hAliorXn nymsZ7YactGImWpmDSF34Ee1nuwXtLNJOnKPR28QHSyUvjMDxr1 iyZWnkhecQ9fFKRWJwJu9Au9b8rZFEqH0p3BzOypb8addwFOPVnalR6zHLrr5qiqd60hY9UXiwtbZgs P1QtJUIeOI1s8o1 YOjgTIy5vfBfYtDqUCD6QKh5bvR2W9X64JApE1oaXP9S5I8pNzuoxk38lfSOmkEMbNzSYi3Ibm0l6tKDIx3vkcRjq4nCAZ6TYwS7yGaj/2p imported-openssh-key
        </property>
        <property id="imageName">rhel67</property>
        <property id="volumeSize"	>50</property>
        <property id="deleteVolumeOnTermination">true</property>
        <property id="deleteSnapshotsBeforeVolume">true</property>
		<property id="waitForSnapshotCreation">true</property>
		<property id="snapshotCreationWaitTimeout">1300</property>
        <property id="bootSource">IMAGE</property>
        <property id="volumeCreateTimeout">1200</property>
        <property id="volumeAvailabilityZone">nova</property>
        <property id="instanceAvailabilityZone">AZ1</property>
        <property id="modules">org.jclouds.logging.slf4j.config.SLF4JLoggingModule</property>
        <property id="cleanUpNetworkResourcesOnTermination">true</property>
        <property id="createVirtualIPs">true</property>
		<property id="floatingIPNet">nova</property>
    </properties>
    <properties id="testEntry">
        <property id="testId">testValue</property>
    </properties>
</vnfd>
